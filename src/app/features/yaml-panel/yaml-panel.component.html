<div class="yaml-panel">
  <div class="panel-header">
    <h3>OTel Collector Configuration</h3>
    <div class="panel-actions">
      <button class="btn btn-sm" (click)="reformatYaml()" title="Reformat YAML">
        âœ¨ Reformat
      </button>
      <button class="btn btn-sm" (click)="copyToClipboard()" title="Copy to clipboard">
        ğŸ“‹ Copy
      </button>
    </div>
  </div>

  @if (state.errors().length > 0) {
  <div class="error-banner">
    @for (error of state.errors(); track error.message) {
    <div class="error-item">
      <button class="error-summary"
              [disabled]="!error.line"
              (click)="error.line ? goToLine(error.line) : null"
              [attr.aria-label]="error.line ? 'Go to error at line ' + error.line : null">
        âš ï¸ {{ error.message }}
        @if (error.line) {
        <span class="error-line-link">â†’ line {{ error.line }}</span>
        }
      </button>
      @if (error.fullError && error.fullError !== error.message) {
      <button class="error-toggle" (click)="toggleErrorDetail(error.message)">
        {{ expandedErrors().has(error.message) ? 'â–¼ Hide detail' : 'â–¶ Show detail' }}
      </button>
      @if (expandedErrors().has(error.message)) {
      <pre class="error-detail">{{ error.fullError }}</pre>
      }
      }
    </div>
    }
  </div>
  }

  @if (state.validationIssues().length > 0) {
  <div class="validation-banner">
    @for (issue of state.validationIssues(); track issue.message) {
    <p [class]="'issue-' + issue.severity">
      {{ issue.severity === 'error' ? 'ğŸ”´' : issue.severity === 'warning' ? 'ğŸŸ¡' : 'â„¹ï¸' }}
      {{ issue.message }}
    </p>
    }
  </div>
  }

  <div class="editor-wrapper" #editorContainer></div>
</div>