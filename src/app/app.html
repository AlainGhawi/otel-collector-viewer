<div class="app-layout">
    <app-toolbar />

    <div class="tab-bar">
        <button
            class="tab-button"
            [class.active]="activeTab() === 'config'"
            (click)="setActiveTab('config')">
            Config Viewer
        </button>
        <button
            class="tab-button"
            [class.active]="activeTab() === 'logs'"
            (click)="setActiveTab('logs')">
            Log Viewer
        </button>
    </div>

    <div class="app-content" [hidden]="activeTab() !== 'config'">
        <div class="graph-area">
            <app-graph-viewer />
            <app-node-detail (goToLine)="onGoToLine($event)" />
        </div>

        <!-- This div is to resize the panels -->
        <div class="resize-handle" (mousedown)="onResizeStart($event)">
            <div class="resize-grip"></div>
        </div>

        <div class="yaml-area" [style.width.%]="yamlPanelWidthPercent">
            <app-yaml-panel #yamlPanel />
        </div>
    </div>

    @defer (when activeTab() === 'logs') {
        <div class="app-content log-viewer-content" [hidden]="activeTab() !== 'logs'">
            <app-log-viewer />
        </div>
    }
</div>
